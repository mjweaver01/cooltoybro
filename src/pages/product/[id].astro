---
import { siteName } from '@/lib/constants'
import { products as p } from '@/lib/products'
import Layout from '@/layouts/Layout.astro'
import Navbar from '@/components/Navbar.astro'
import Product from '@/components/Product.svelte'

export const prerender = true

export function getStaticPaths() {
  return p.map((product) => {
    return {
      params: { id: product.slug },
      props: { product },
    }
  })
}

const { id } = Astro.params
const { product } = Astro.props
const title = `${product.title} | ${siteName}`
const description = product.description
// const sessionCookie = Astro.cookies.get('session')?.value ?? null
---

<Layout title={title} description={description} image={product.images[0]}>
  <Navbar active={`/product/${id}`} />
  <Product client:load product={product} />
</Layout>
